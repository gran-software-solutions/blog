"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[8505],{70:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var n=r(8168),a=(r(6540),r(5680)),o=r(9041);const i={title:"Automating Production Postgres on Kubernetes: A PGO and Ansible IaC Pattern",authors:"gglazewskigran",tags:["k8s","ansible","postgresql","devops"],enableComments:!0},s=void 0,l={permalink:"/2025/07/14/a-pgo-and-ansible-iac-pattern",source:"@site/blog/2025-07-14-a-pgo-and-ansible-iac-pattern/index.mdx",title:"Automating Production Postgres on Kubernetes: A PGO and Ansible IaC Pattern",description:'<MyImg src={require("./arms.jpeg").default} alt="AA robotic arm in an 80s sci-fi style installing server equipment into a rack within a modern data center."',date:"2025-07-14T00:00:00.000Z",formattedDate:"July 14, 2025",tags:[{label:"k8s",permalink:"/tags/k-8-s"},{label:"ansible",permalink:"/tags/ansible"},{label:"postgresql",permalink:"/tags/postgresql"},{label:"devops",permalink:"/tags/devops"}],readingTime:10.12,hasTruncateMarker:!0,authors:[{name:"Greg Glazewski",title:"Software Engineer @ GRAN Software Solutions GmbH",url:"https://www.linkedin.com/in/greg-glazewski-88390827",imageURL:"https://github.com/gglazewskigran.png",key:"gglazewskigran"}],frontMatter:{title:"Automating Production Postgres on Kubernetes: A PGO and Ansible IaC Pattern",authors:"gglazewskigran",tags:["k8s","ansible","postgresql","devops"],enableComments:!0},nextItem:{title:"Beyond SSH Tunnels: Secure K8s Access with WireGuard & Ansible",permalink:"/2025/07/04/k8s-wireguard-access"}},c={authorsImageUrls:[void 0]},u=[],p={toc:u},g="wrapper";function d({components:e,...t}){return(0,a.yg)(g,(0,n.A)({},p,t,{components:e,mdxType:"MDXLayout"}),(0,a.yg)(o.A,{src:r(8677).A,alt:"AA robotic arm in an 80s sci-fi style installing server equipment into a rack within a modern data center.",title:"The future of IT infrastructure built with automation",mdxType:"MyImg"}),(0,a.yg)("p",null,"This guide details a production-grade, Infrastructure as Code (IaC) pattern for deploying the Crunchy Data Postgres Operator (PGO) on Kubernetes with Ansible. It's designed for experienced engineers managing their own infrastructure on platforms like K3s, not for those using managed cloud database services like RDS or Cloud SQL."),(0,a.yg)("p",null,"By wrapping PGO's Helm chart and cluster definitions in Ansible, you create a version-controlled, repeatable, and automated system. By the end, you will have a complete playbook that deploys PGO and provisions a Postgres cluster with production-ready, S3-backed backups."))}d.isMDXComponent=!0},5680:(e,t,r)=>{r.d(t,{xA:()=>u,yg:()=>m});var n=r(6540);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef(function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(r),d=a,m=p["".concat(l,".").concat(d)]||p[d]||g[d]||o;return r?n.createElement(m,i(i({ref:t},u),{},{components:r})):n.createElement(m,i({ref:t},u))});function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},8677:(e,t,r)=>{r.d(t,{A:()=>n});const n=r.p+"assets/images/arms-56e4735a35515ab76442e09cf2b9bb54.jpeg"},9041:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(6540);const a=function(e){const t=e.width?{width:`${e.width}px`}:{};return void 0!==e.title?n.createElement("center",null,n.createElement("figure",null,n.createElement("img",{src:e.src,alt:e.alt,style:t}),n.createElement("figcaption",{style:{textAlign:"center"}},e.title))):n.createElement("img",{src:e.src,alt:e.alt,style:t})}}}]);